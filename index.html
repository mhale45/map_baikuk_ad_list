
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
        <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f605c7b72dc7f3083f36483e55e2bc77&autoload=false"></script>
        <style>
            #map {
                width: 100%;
                height: 880px;
            }
            .info-window-one {
                font-size: 13px !important; /* 🔹 글자 크기 설정 */
                font-weight: 500 !important; /* 🔹 글자 굵게 설정 */
                background: rgba(255, 255, 255, 1); !important;
                padding: 5px !important; /* 🔹 내부 여백 설정 */
                max-width: 600px !important; /* 🔹 최대 너비 설정 */
                word-wrap: break-word !important; /* 🔹 긴 단어가 있으면 자동으로 줄바꿈 */
                overflow-wrap: break-word !important; /* 🔹 공백이 없어도 강제 줄바꿈 */
                overflow-x: auto !important; /* 🔹 가로 스크롤 */
                white-space: nowrap !important; /* 🔹 자동 줄바꿈 방지 (공백이 있어도 줄바꿈되지 않음) */
                text-align: left !important; /* 🔹 텍스트 정렬을 왼쪽으로 설정 */
                pointer-events: none !important; /* 터치 및 클릭 비활성화 */

                position: absolute !important;
                margin-top: -20px !important;
                border: none !important; /* ✅ 테두리 제거 */
                box-border: none !important; /* ✅ 그림자 제거 */
                box-shadow: none !important; /* ✅ 그림자 제거 */
                opacity: 1 !important; /* ✅ 불투명도 강제 적용 */
            }
            .info-window-one::after{
                content: none !important; /* ✅ 삼각형을 완전히 제거 */
                display: none !important;
                box-border: none !important; /* ✅ 그림자 제거 */
                background: rgba(255, 255, 255, 0) !important;
            }
            .info-window-many {
                font-size: 14px !important; /* 🔹 글자 크기 설정 */
                font-weight: 500 !important; /* 🔹 글자 굵게 설정 */
                background-color: white !important; /* 🔹 배경 색상을 흰색으로 설정 */
                padding: 5px !important; /* 🔹 내부 여백 설정 */
                border-radius: 5px !important; /* 🔹 박스 테두리를 둥글게 만듦 */
                line-height: 2 !important; /* 🔹 줄 간격 조정 */
                max-width: 600px !important; /* 🔹 최대 너비 설정 */
                max-height: 600px !important; /* 🔹 최대 높이 설정 */
                white-space: nowrap !important; /* 🔹 자동 줄바꿈 
                overflow-x: auto !important; /* 🔹 가로 스크롤 제거 */
                overflow-y: auto !important; /* 🔹 내용이 많으면 세로 스크롤 생성 */                
                border: 3px solid black !important; /* 🔹 두께 3px, 검정색 테두리 */
                box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2) !important; /* 🔹 그림자 추가 */
            }
            .custom-overlay {
                position: absolute;
                bottom: 12px; /* ✅ 오버레이 위치 조정 */
                left: 50%;
                transform: translateX(-50%);
                background: rgba(255, 255, 255, 0.9);
                border-radius: 5px;
                font-size: 13px;
                white-space: nowrap;
                text-align: center;
                border: none;
                user-select: text;
                cursor: pointer;
                border: none !important; /* ✅ 테두리 제거 */
                box-shadow: none !important; /* ✅ 그림자 제거 */
            }
            .custom-overlay::after {
                content: none !important; /* ✅ 삼각형 제거 */
                display: none !important;
                border: none !important; /* ✅ 테두리 제거 */
            }
            /* 📌 버튼 스타일 */
            #openInitialInfoWindows, #closeAllInfoWindows, #toggleSearch {
                position: absolute; 
                right: 20px; 
                padding: 10px 15px; 
                border: none; 
                border-radius: 5px; 
                font-weight: bold; 
                cursor: pointer;
                width: auto;
                box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
                z-index: 1000;
            }
            /* 📌 "검색창" 버튼 (파란색) */
            #toggleSearch {
                bottom: 20px; 
                background-color: #007bff;
                color: white;
            }
            /* 📌 "텍스트 열기" 버튼 (초록색) */
            #openInitialInfoWindows {
                bottom: 100px; /* 닫기 버튼 위에 위치 */
                background-color: #4CAF50;
                color: white;
            }
            /* 📌 "텍스트 닫기" 버튼 (빨간색) */
            #closeAllInfoWindows {
                bottom: 60px; 
                background-color: #ff5555;
                color: white;
            }
            /* 검색창 스타일 */
            #search-container {
                position: absolute;
                top: 60px;
                right: 10px;
                background: white;
                padding: 8px;
                border-radius: 5px;
                box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
                z-index: 1000;
                display: none;
            }
            /* 검색 결과 스타일 */
            #searchResults {
                overflow-y: auto;   /* ✅ 스크롤 가능하도록 설정 */
                background: white;
                padding: 8px;
                border-radius: 5px;
                box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
                resize: vertical; /* ✅ 마우스로 세로 크기 조절 가능 */
                min-height: 10px; /* ✅ 최소 높이 제한 (사용자가 너무 작게 줄이지 못하도록) */
                max-height: 500px; /* ✅ 최대 높이 제한 */
            }
            /* 검색 결과 버튼 스타일 */
            .search-result-item {
                display: block;
                width: 100%;
                margin-top: 5px;
                padding: 5px;
                background: #007bff;
                color: white;
                border: none;
                border-radius: 3px;
                cursor: pointer;
                text-align: left;
            }
            .search-result-item:hover {
                background: #0056b3;
            }

        </style>
    </head>
    <body>
        <!-- 📌 비밀번호 입력 창 -->
        <div id="password-container" style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 1000;">
            <h3>비밀번호 입력</h3>
            <input type="password" id="passwordInput" placeholder="비밀번호 입력" style="padding: 5px;">
            <button onclick="checkPassword()" style="padding: 5px; cursor: pointer;">확인</button>
            <p id="errorMessage" style="color: red; display: none;">비밀번호가 틀렸습니다!</p>
        </div>
        
        <!-- 📌 지도 및 UI (비밀번호 입력 후 표시됨) -->
        <div id="map-container" style="display: none;">
            <h2></h2>
            <div id="map"></div>
            <!-- 📌 "텍스트 열기" 버튼 -->
            <button id="openInitialInfoWindows">텍스트 열기</button>
            <!-- 📌 "텍스트 닫기" 버튼 -->
            <button id="closeAllInfoWindows">텍스트 닫기</button>
            <button id="toggleSearch">검색창</button>
            <!-- 📌 검색창 -->
            <div id="search-container" style="
                position: absolute; 
                top: 60px; 
                right: 20px; 
                background: white; 
                padding: 10px; 
                border-radius: 5px; 
                box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
                z-index: 1000;">
                <input type="text" id="searchInput" placeholder="검색어 입력" style="padding: 5px; width: 150px;">
                <button id="searchButton" style="padding: 5px; cursor: pointer;">🔍 검색</button>
                <div id="searchResults" style="margin-top: 5px;"></div>
            </div>
        </div>
    </body>
    </html>
        <script>
            function checkPassword() {
                var correctPassword = "2834"; // ✅ 원하는 비밀번호 설정
                var userInput = document.getElementById("passwordInput").value;
                var errorMessage = document.getElementById("errorMessage");

                if (userInput === correctPassword) {
                    document.getElementById("password-container").style.display = "none";
                    document.getElementById("map-container").style.display = "block";
                    document.getElementById("search-container").style.display = "block";
                    document.getElementById("openInitialInfoWindows").style.display = "block"; 
                    document.getElementById("closeAllInfoWindows").style.display = "block"; 
                    loadMap(); // ✅ 지도 로드
                } else {
                    errorMessage.style.display = "block";
                }
            }

            // 비밀번호 입력 필드 자동 포커스
            document.getElementById("passwordInput").focus();

            // ✅ Enter 키로도 비밀번호 입력 가능하게 이벤트 추가
            document.getElementById("passwordInput").addEventListener("keypress", function(event) {
                if (event.key === "Enter") {
                    checkPassword();  // 엔터를 누르면 checkPassword 실행
                }
            });

            function loadMap() {
                if (typeof kakao !== "undefined") {
                    kakao.maps.load(function() {
                        var container = document.getElementById('map');
                        var options = {
                            center: new kakao.maps.LatLng(37.697248, 126.760244),
                            level: 3
                        };
                        var map = new kakao.maps.Map(container, options);

                        var markers = [];  
                        var infoWindows = [];  
                        var overlays = []; 
                        var isOpenStates = [];  
                        var initialOpenStates = [];
                        var titles = [];               

                        var markerImageSize = new kakao.maps.Size(38, 38);
                        var markerImageOptions = { offset: new kakao.maps.Point(14, 14) };
                        var markerImageOne = new kakao.maps.MarkerImage("https://raw.githubusercontent.com/mhale45/image/main/2-1.png", markerImageSize, markerImageOptions);
                        var markerImageMany = new kakao.maps.MarkerImage("https://raw.githubusercontent.com/mhale45/image/main/5-1.png", markerImageSize, markerImageOptions);

                        
            var line_count = 2; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6849444, 126.7172468), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2508941006 3F  82.89(25.1평) 1,000/40<br>2506482115 1F  18.13(5.5평) 1,000/65 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 1090</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2508941006 3F  82.89(25.1평) 1,000/40<br>2506482115 1F  18.13(5.5평) 1,000/65");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.684087, 126.7174379), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2508949569 1F  86.1(26.0평) 3,000/100 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 299-7</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2508949569 1F  86.1(26.0평) 3,000/100");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6894072, 126.7187889), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2508943346 1F  29.84(9.0평) 1,500/100 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 1088</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2508943346 1F  29.84(9.0평) 1,500/100");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6854595, 126.7199264), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2508942512 1F  132.0(39.9평) 2,000/200 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 308-11</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2508942512 1F  132.0(39.9평) 2,000/200");  // ✅ 제목 추가
        
            var line_count = 4; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6853335, 126.7202419), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2505290924 1F  47.0(14.2평) 1,000/100<br>2507364339 1F  64.32(19.5평) 1,000/100<br>2508940566 1F  66.0(20.0평) 1,000/110<br>2504984329 1F  66.0(20.0평) 1,000/140 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 308-1</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2505290924 1F  47.0(14.2평) 1,000/100<br>2507364339 1F  64.32(19.5평) 1,000/100<br>2508940566 1F  66.0(20.0평) 1,000/110<br>2504984329 1F  66.0(20.0평) 1,000/140");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6850053, 126.7204455), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2510040318 1F  135.7(41.0평) 2,000/150 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 307-9</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2510040318 1F  135.7(41.0평) 2,000/150");  // ✅ 제목 추가
        
            var line_count = 4; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6910627, 126.7206573), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2510771464 B1F  39.67(12.0평) 300/37<br>2505281588 3F  36.9(11.2평) 1,000/55<br>2508701607 3F  19.83(6.0평) 500/55<br>2507042520 2F  91.5(27.7평) 3,000/150 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 1087</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2510771464 B1F  39.67(12.0평) 300/37<br>2505281588 3F  36.9(11.2평) 1,000/55<br>2508701607 3F  19.83(6.0평) 500/55<br>2507042520 2F  91.5(27.7평) 3,000/150");  // ✅ 제목 추가
        
            var line_count = 2; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6847376, 126.7212458), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2509578191 3F  137.66(41.6평) 1,500/140<br>2506464560 3F  137.66(41.6평) 1,500/150 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 310-2</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2509578191 3F  137.66(41.6평) 1,500/140<br>2506464560 3F  137.66(41.6평) 1,500/150");  // ✅ 제목 추가
        
            var line_count = 3; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6847807, 126.7214123), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2505287562 2F  114.3(34.6평) 2,000/150<br>2508455960 1F  119.96(36.3평) 2,000/200<br>2505289145 1F  117.0(35.4평) 2,500/220 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 352-3</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2505287562 2F  114.3(34.6평) 2,000/150<br>2508455960 1F  119.96(36.3평) 2,000/200<br>2505289145 1F  117.0(35.4평) 2,500/220");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6848927, 126.7215777), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2509978783 1F  148.0(44.8평) 2,000/160 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 352-1</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2509978783 1F  148.0(44.8평) 2,000/160");  // ✅ 제목 추가
        
            var line_count = 3; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6855466, 126.7224693), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2506327082 2F  51.2(15.5평) 500/40 (362-1 제206호)<br>2507940901 B1F  128.4(38.8평) 400/45<br>2505351091 1F  42.4(12.8평) 1,000/75 (362-1 제 104호) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 362-1</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2506327082 2F  51.2(15.5평) 500/40 (362-1 제206호)<br>2507940901 B1F  128.4(38.8평) 400/45<br>2505351091 1F  42.4(12.8평) 1,000/75 (362-1 제 104호)");  // ✅ 제목 추가
        
            var line_count = 3; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6855373, 126.7228141), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2504777889 2F  60.16(18.2평) 1,000/50 (362-6 2층 전체)<br>2506465969 1F  66.3(20.1평) 2,000/110<br>2505989828 1F  66.3(20.1평) 1,000/120 (362-6 1층 일부) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 362-6</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2504777889 2F  60.16(18.2평) 1,000/50 (362-6 2층 전체)<br>2506465969 1F  66.3(20.1평) 2,000/110<br>2505989828 1F  66.3(20.1평) 1,000/120 (362-6 1층 일부)");  // ✅ 제목 추가
        
            var line_count = 8; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6895199, 126.7229513), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2505926423 B1F  56.25(17.0평) 500/45 (1086 가좌마을 제 상가동 제지1층 제비108호 일부)<br>2505678753 1F  26.62(8.1평) 1,000/70<br>2505810963 1F  26.0(7.9평) 2,000/70<br>2505985936 1F  26.63(8.1평) 2,500/80<br>2506996048 2F  53.25(16.1평) 1,000/80<br>2505646056 1F  26.6(8.0평) 1,500/90<br>2509139140 3F  72.72(22.0평) 1,300/105<br>2505292716 2F  199.71(60.4평) 2,000/230 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 1086</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2505926423 B1F  56.25(17.0평) 500/45 (1086 가좌마을 제 상가동 제지1층 제비108호 일부)<br>2505678753 1F  26.62(8.1평) 1,000/70<br>2505810963 1F  26.0(7.9평) 2,000/70<br>2505985936 1F  26.63(8.1평) 2,500/80<br>2506996048 2F  53.25(16.1평) 1,000/80<br>2505646056 1F  26.6(8.0평) 1,500/90<br>2509139140 3F  72.72(22.0평) 1,300/105<br>2505292716 2F  199.71(60.4평) 2,000/230");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6929167, 126.7240244), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2504785727 1F  56.0(16.9평) 2,000/80 (119-7 1층 일부) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 119-7</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2504785727 1F  56.0(16.9평) 2,000/80 (119-7 1층 일부)");  // ✅ 제목 추가
        
            var line_count = 2; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6882818, 126.7241195), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2509093845 1F  99.17(30.0평) 2,000/180<br>2505277842 2F  393.39(119.0평) 5,000/500 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 161-1</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2509093845 1F  99.17(30.0평) 2,000/180<br>2505277842 2F  393.39(119.0평) 5,000/500");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6905123, 126.724484), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2506956930 B1F  198.35(60.0평) 1,000/80 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 145-1</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2506956930 B1F  198.35(60.0평) 1,000/80");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.7012962, 126.724615), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2509108676   0.0(0.0평) 3,000/190 (외2필지제가동호) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 33-3</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2509108676   0.0(0.0평) 3,000/190 (외2필지제가동호)");  // ✅ 제목 추가
        
            var line_count = 2; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.6911172, 126.7253141), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2509782586   0.0(0.0평) 6,000/350 (153-1 1동 3층)<br>2509782509 3F  367.65(111.2평) 6,000/350 (153-1 1동 3층) </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가좌동 153-1</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2509782586   0.0(0.0평) 6,000/350 (153-1 1동 3층)<br>2509782509 3F  367.65(111.2평) 6,000/350 (153-1 1동 3층)");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.849597, 126.8627654), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2510193028 2F  199.3(60.3평) 3,000/210 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가야리 200-23</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2510193028 2F  199.3(60.3평) 3,000/210");  // ✅ 제목 추가
        
            var line_count = 1; 
            var isOpen = Boolean(line_count <= 1);  // ✅ 정확한 boolean 값 변환
            var markerImage = isOpen ? markerImageOne : markerImageMany;
            var infoWindowClass = isOpen ? "info-window-one" : "info-window-many"; // ✅ 클래스 설정

            // ✅ 마커 생성 후 배열에 저장
            var marker = new kakao.maps.Marker({ 
                position: new kakao.maps.LatLng(37.8502523, 126.8675016), 
                map: map,
                image: markerImage
            });
            markers.push(marker);

            // ✅ InfoWindow 생성 후 배열에 저장
            var infowindow = new kakao.maps.InfoWindow({
                content: `<div class="${infoWindowClass}"> 2507891172 1F  72.2(21.8평) 1,000/55 </div>`, 
                removable: false 
            });
            infoWindows.push(infowindow);

            var overlayContent = `<div class="custom-overlay">가야리 54-8</div>`;
            var overlay = new kakao.maps.CustomOverlay({
                content: overlayContent,
                position: marker.getPosition(),
                yAnchor: -1,
                map: null // ✅ 처음에는 보이지 않도록 설정
            });
            overlays.push(overlay);

            isOpenStates.push(isOpen);
            initialOpenStates.push(isOpen);  // ✅ 초기 상태를 별도로 저장
            titles.push("2507891172 1F  72.2(21.8평) 1,000/55");  // ✅ 제목 추가
          

                        map.setCenter(new kakao.maps.LatLng(37.697248, 126.760244));
                        map.setLevel(3);  // 숫자가 작을수록 확대

                        markers.forEach((marker, index) => {
                            // ✅ 오버레이 HTML 생성 (마커 아래쪽에 위치)
                            var overlayContent = `<div class="custom-overlay">$가야리 54-8</div>`;

                            var overlay = new kakao.maps.CustomOverlay({
                                content: overlayContent,
                                position: marker.getPosition()
                            });

                            overlays.push(overlay);
                            isOpenStates.push(false);
                            initialOpenStates.push(false);

                            kakao.maps.event.addListener(marker, 'click', function() {
                                if (isOpenStates[index]) {
                                    infoWindows[index].close();
                                    overlays[index].setMap(null);
                                    isOpenStates[index] = false;
                                } else {
                                    infoWindows[index].open(map, marker);
                                    overlays[index].setMap(map);
                                    isOpenStates[index] = true;
                                }
                            });
                        });

                        document.getElementById("closeAllInfoWindows").addEventListener("click", function() {
                            infoWindows.forEach((infoWindow, index) => {
                                infoWindow.close();
                                isOpenStates[index] = false;
                            });
                            overlays.forEach((overlay, index) => {
                                overlay.setMap(null);
                                isOpenStates[index] = false;
                            });
                        });

                        document.getElementById("openInitialInfoWindows").addEventListener("click", function() {                            
                            lastCenter = map.getCenter();
                            lastLevel = map.getLevel();    

                            let bounds = map.getBounds();  // ✅ 현재 지도의 범위를 가져옴

                            for (let i = 0; i < markers.length; i++) {
                                if (bounds.contain(markers[i].getPosition())) {  // ✅ 현재 지도 범위 안에 있는 마커인지 확인
                                    if (initialOpenStates[i]) {
                                        infoWindows[i].open(map, markers[i]);  // ✅ 현재 보이는 마커만 열기
                                        overlays[i].setMap(map);
                                        isOpenStates[i] = true;  
                                    }
                                }
                            }

                            // ✅ 지도 위치를 복원
                            if (lastCenter !== null && lastLevel !== null) {
                                map.setCenter(lastCenter);
                                map.setLevel(lastLevel);
                            }
                        });
                        

                        document.getElementById("searchButton").addEventListener("click", searchInfoWindows);
                        document.getElementById("searchInput").addEventListener("keypress", function(event) {
                            if (event.key === "Enter") {
                                searchInfoWindows();
                            }
                        });

                        function searchInfoWindows() {
                            var keyword = document.getElementById("searchInput").value.trim();
                            var resultsDiv = document.getElementById("searchResults");
                            resultsDiv.innerHTML = "";

                            if (keyword === "") {
                                resultsDiv.innerHTML = "<p style='color: red;'>검색어를 입력하세요!</p>";
                                return;
                            }

                            var results = [];
                            
                            infoWindows.forEach((infoWindow, index) => {
                                var content = infoWindow.getContent();
                                if (content.includes(keyword)) {
                                    results.push({ index: index, content: content, title: titles[index] });
                                }
                            });

                            if (results.length === 0) {
                                resultsDiv.innerHTML = "<p style='color: red;'>검색 결과가 없습니다.</p>";
                            } else {
                                results.forEach(result => {
                                    var button = document.createElement("button");
                                    button.innerHTML = `${result.title}`;
                                    button.style = "display: block; margin-top: 5px; padding: 5px; cursor: pointer;";
                                    button.addEventListener("click", function() {
                                        var marker = markers[result.index];
                                        var infoWindow = infoWindows[result.index];
                                        var overlay = overlays[result.index];

                                        map.setCenter(marker.getPosition());
                                        map.setLevel(3); 

                                        infoWindows.forEach((iw) => iw.close()); // ✅ 모든 InfoWindow 닫기
                                        overlays.forEach(ov => ov.setMap(null));

                                        infoWindow.open(map, marker); 
                                        overlay.setMap(map);

                                    });

                                    resultsDiv.appendChild(button);
                                });
                            }
                        }

                        document.addEventListener("click", function (event) {
                            // 클릭된 요소가 .custom-overlay 클래스인지 확인
                            if (event.target.classList.contains("custom-overlay")) {
                                var textToCopy = event.target.textContent.trim();

                                navigator.clipboard.writeText(textToCopy).then(() => {
                                    showCopyMessage(event.target);
                                }).catch(err => {
                                    console.error("클립보드 복사 실패: ", err);
                                });
                            }
                        });

                        // ✅ 복사 완료 메시지를 표시하는 함수
                        function showCopyMessage(target) {
                            // 기존 메시지가 있으면 삭제
                            let existingMsg = target.querySelector(".copy-message");
                            if (existingMsg) {
                                existingMsg.remove();
                            }

                            // 메시지 생성
                            let message = document.createElement("div");
                            message.classList.add("copy-message");
                            message.textContent = "📋 복사됨!";
                            
                            // 스타일 설정
                            message.style.position = "absolute";
                            message.style.bottom = "100%";
                            message.style.left = "50%";
                            message.style.transform = "translateX(-50%)";
                            message.style.background = "black";
                            message.style.color = "white";
                            message.style.padding = "5px 10px";
                            message.style.borderRadius = "5px";
                            message.style.fontSize = "12px";
                            message.style.fontWeight = "bold";
                            message.style.opacity = "0.9";
                            message.style.whiteSpace = "nowrap";
                            message.style.transition = "opacity 0.5s ease-in-out";

                            // 메시지를 오버레이에 추가
                            target.appendChild(message);

                            // 1.5초 후 메시지 삭제
                            setTimeout(() => {
                                message.style.opacity = "0";
                                setTimeout(() => message.remove(), 500);
                            }, 1500);
                        }
                        document.getElementById("toggleSearch").addEventListener("click", function() {
                            var searchContainer = document.getElementById("search-container");
                            if (searchContainer.style.display === "none") {
                                searchContainer.style.display = "block";
                            } else {
                                searchContainer.style.display = "none";
                            }
                        });
                        
                        document.querySelectorAll('div[style*="cursor: default;"]').forEach(el => el.remove());

                    });
                } else {
                    console.error("❌ 카카오맵 API가 로드되지 않았습니다. API 키 또는 도메인 등록을 확인하세요.");
                }
            }
        </script>
    